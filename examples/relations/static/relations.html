<!doctype html>
<html>
<head>
    <title>Relations</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
<script src='/static/schema_dialog.js'></script>
<script src='/static/components.js'></script>
<script>
function renderDialog(schema) {
  const dialog = document.createElement('div');
  dialog.classList.add('dialog');
  const title = document.createElement('h3');
  title.textContent = schema.title;
  dialog.appendChild(title);

  const form = document.createElement('form');

  schema.fields.forEach(field => {
    const wrapper = document.createElement('div');
    wrapper.style = 'margin-bottom: 10px;';

    const label = document.createElement('label');
    label.textContent = field.label;
    label.htmlFor = field.name;
    const label_span = document.createElement('span');
    label_span.style='padding-left:10px;padding-right:10px;';
    label_span.appendChild(label);


    let inputElement;

    switch (field.type) {
      case 'text':
      case 'number':
        inputElement = document.createElement('input');
        inputElement.type = field.type;
        inputElement.name = field.name;
        break;
      case 'select':
        inputElement = document.createElement('select');
        field.options.forEach(optionValue => {
          const option = document.createElement('option');
          option.value = optionValue;
          option.textContent = optionValue;
          inputElement.appendChild(option);
        });
        inputElement.name = field.name;
        break;
      case 'textarea':
        inputElement = document.createElement('textarea');
        inputElement.name = field.name;
        break;
      default:
        console.error(`Unsupported field type: ${field.type}`);
        return;
    }

    wrapper.appendChild(label_span);
    wrapper.appendChild(inputElement);

    form.appendChild(wrapper);
  });

  schema.actions.forEach(action => {
    const button = document.createElement('button');
    button.classList.add('close-button');
    button.textContent = action.label;
    
    if (action.type === 'submit') {
      button.type = 'submit';
    } else if (action.action === 'close') {
      button.onclick = () => {
        document.body.removeChild(dialog);
      };
    }

    form.appendChild(button);
  });

  dialog.appendChild(form);

  // Style the dialog
  dialog.style.position = 'fixed';
  dialog.style.top = '50%';
  dialog.style.left = '50%';
  dialog.style.transform = 'translate(-50%, -50%)';
  dialog.style.background = '#f9f9f9';
  dialog.style.padding = '20px';
  dialog.style.border = '1px solid #ccc';
  dialog.style.borderRadius = '5px';
  dialog.style.width = '300px';
  dialog.style.boxShadow = '0 0 10px rgba(0, 0, 0, 0.1)';

  document.body.appendChild(dialog);
}

const dialogSchema = {
  title: 'User Information',
  fields: [
    { type: 'text', label: 'Name', name: 'name' },
    { type: 'number', label: 'Age', name: 'age' },
    {
      type: 'select',
      label: 'Favorite Color',
      name: 'color',
      options: ['Red', 'Green', 'Blue']
    },
    { type: 'textarea', label: 'Bio', name: 'bio' }
  ]
};

// Render the dialog on the page
schema = {fields: []};


// Render the dialog on the page
</script>
</head>
<body>
  <div class="container">
      <!-- Main Content Column -->
      <div class="main-content">
	  <h1>Main Content</h1>
	  <div id='maindiv'>
	      This is the main content area. You can put any content you'd like here.
	  </div>
      </div>

      <!-- Menu Icons Column -->
      <div class="menu-icons">
	  <div class="icon label-button">+</div>
          <div class="icon label-button" onclick="createNewSchemaDialog({fields:[]})">New model</div>
	  <div class="icon label-button" onclick="modelsDialog({fields:[]})">Models</div>
      </div>
  </div>
</body>
</html>

